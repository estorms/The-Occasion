function updatePoem(n){return new Promise(function(t,i){$.ajax({url:"/Poem/UpdatePoem",method:"POST",contentType:"application/json",data:JSON.stringify(n)}).done(function(n){t(n)}).error(function(n){i(n)})})}var images=["birds1.jpg","birds2.jpg","birds3.jpg","birds4.jpg","birds5.jpg","birds6.jpg"],splashImg=images[Math.floor(Math.random()*images.length)];$("body").css({"background-image":`url(../images/${splashImg})`});$("#findButton").on("click",function(){console.log("find button clicked");$(".browse").removeClass("hidden");$("#findButton").addClass("hidden");$("#bored").addClass("hidden");$("#makePoem").addClass("hidden");$("#curebutt").addClass("hidden");$("#makeHaiku").addClass("hidden");$("#myPoems").addClass("hidden");$("#hereBePoems").empty()});$("#curebutt").on("click",function(){$(".picky").removeClass("hidden");$("#CurateMe").removeClass("hidden");$("#findButton").addClass("hidden");$("#bored").addClass("hidden");$("#makePoem").addClass("hidden");$("#curebutt").addClass("hidden");$("#makeHaiku").addClass("hidden");$("#myPoems").addClass("hidden")});$("#SaveBored").on("click",function(){console.log("save buttonbored clicked clicked");console.log($(this).val());$.ajax({url:`Poem/SaveBored/${$(this).val()}`,method:"POST",contentType:"application/json; charset=utf-8"}).done(()=>{$("#ItsSaved2").removeClass("hidden"),$("#GoHome2").removeClass("hidden"),$("#SaveBored").addClass("hidden")})});$("#Save").on("click",function(){console.log("save button clicked clicked");console.log("this.value",$(this).val());$.ajax({url:`/Poem/Save/${$(this).val()}`,method:"POST",contentType:"application/json; charset=utf-8"}).done(n=>{console.log("result",n),$("#Save").addClass("hidden"),$("#ItsSaved").removeClass("hidden"),$("#GoHome").removeClass("hidden"),$("#SavedAgain").removeClass("hidden"),$("#GoHome3").removeClass("hidden")})});$("#Moods_Id").on("change",function(){mood=$(this).val();console.log("mood",mood)});$("#Topics_Id").on("change",function(){topic=$(this).val();console.log("topic",topic)});$("#Forms_Id").on("change",function(){form=$(this).val();console.log("form",form)});$("#CurateMe").on("click",function(){console.log("curate me clicked");console.log(mood+form+topic);$.ajax({url:`/Poem/Curate/${mood}/${topic}/${form}`,method:"GET"}).done(n=>{console.log("result",n),$("#hereBePickyPoems").html(" "),$("#hereBePickyPoems").append(n),$("#CurateMe").addClass("hidden"),$("#Moods_Id").addClass("hidden"),$("#Topics_Id").addClass("hidden"),$("#Forms_Id").addClass("hidden"),$("#hereBePoems").empty(),$("body").css("background-image"," url(/images/birds1.jpg)")})});$("#Delete").on("click",function(){console.log("delete button clicked");$.ajax({url:`/Poem/Delete/${$(this).val()}`,method:"DELETE"}).done(n=>{console.log(n),$("#Delete").addClass("hidden"),$("#Save").removeClass("hidden")})});$("#DeleteBored").on("click",function(){console.log("delete bored button clicked");console.log($(this).val());$.ajax({url:`/Poem/Delete/${$(this).val()}`,method:"DELETE"}).done(n=>{console.log(n),$("#DeleteBored").addClass("hidden"),$("#SaveBored").removeClass("hidden")})});$("#bored").on("click",function(){console.log("bored button clicked");$.ajax({url:`Poem/Bored/`,method:"GET"}).done(n=>{$("#findButton").addClass("hidden"),$("#bored").addClass("hidden"),$("#makePoem").addClass("hidden"),$("#makeHaiku").addClass("hidden"),$("#myPoems").addClass("hidden"),$("#curebutt").addClass("hidden"),$("#hereBePoems").empty(),$("#hereBePoems").append(n),$(".findselect").addClass("hidden"),$("body").css("background-image","url(/images/birds1.jpg)")})});$("#Forms_FormId").on("change",function(){console.log("form selected, this is its value",$(this).val());var n=$(this).val();$.ajax({url:`Poem/Form/${n}`,method:"GET"}).done(n=>{$("#hereBePoems").empty(),$("#hereBePoems").append(n),$(".findselect").addClass("hidden"),$("body").css("background-image","url(/images/birds1.jpg)")})});$("#Topics_TopicId").on("change",function(){console.log("topic selected, this is its value",$(this).val());var n=$(this).val();$.ajax({url:`Poem/Topic/${n}`,method:"GET"}).done(n=>{$("#hereBePoems").empty(),$("#hereBePoems").append(n),$(".findselect").addClass("hidden"),$("body").css("background-image","url(/images/birds1.jpg)")})});$("#Moods_MoodId").on("change",function(){console.log("mood selected, this is its value",$(this).val());var n=$(this).val();$.ajax({url:`Poem/Mood/${n}`,method:"GET"}).done(n=>{$("#hereBePoems").empty(),$("#hereBePoems").append(n),$(".findselect").addClass("hidden"),$("#myPoems").addClass("hidden"),$("body").css("background-image","url(/images/birds1.jpg)")})});$("#update").on("click",function(){var u=$("#poemId").val(),i,t,r,n;for($("#update").addClass("hidden"),$("#GoHome3").removeClass("hidden"),console.log("poemIdFromJQ",u),i=$("input[id='linesDiv']").map(function(){return $(this).val()}).get(),console.log(i,"existing lines array"),t=$("input[id='edit-input']").map(function(){return $(this).val()}).get(),console.log("edited lines array",t),r=i.slice(),n=0;n<t.length;n++)t[n]!==""&&r.splice(n,1,t[n]);var e=r.toString(),o=e.replace(/,/g,"@@"),f={PoemId:u,Title:$(".title").html(),Author:$(".author").html(),Lines:o};console.log(f,"this is the new poem");updatePoem(f).then(function(){console.log("promise resolved, inside then");window.location.reload(!0)})});$(".edit").on("click",function(){console.log("edit poem clicked");event.preventDefault();$(this).prev().removeClass("hidden");$(this).addClass("hidden")});